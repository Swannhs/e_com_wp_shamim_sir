!function(a,b){var c=function(a){return new f(a)};c.version="0.1.3";var d=a.fxSetup||{rates:{},base:""};c.rates=d.rates,c.base=d.base,c.settings={from:d.from||c.base,to:d.to||c.base};var e=c.convert=function(a,b){if("object"==typeof a&&a.length){for(var d=0;d<a.length;d++)a[d]=e(a[d],b);return a}b=b||{},b.from||(b.from=c.settings.from),b.to||(b.to=c.settings.to);var d=b.to,f=b.from,g=c.rates;if(g[c.base]=1,!g[d]||!g[f])throw"fx error";return d=f===c.base?g[d]:d===c.base?1/g[f]:g[d]*(1/g[f]),a*d},f=function(a){"string"==typeof a?(this._v=parseFloat(a.replace(/[^0-9-.]/g,"")),this._fx=a.replace(/([^A-Za-z])/g,"")):this._v=a},d=c.prototype=f.prototype;d.convert=function(){var a=Array.prototype.slice.call(arguments);return a.unshift(this._v),e.apply(c,a)},d.from=function(a){return a=c(e(this._v,{from:a,to:c.base})),a._fx=c.base,a},d.to=function(a){return e(this._v,{from:this._fx?this._fx:c.settings.from,to:a})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.fx=fx):"function"==typeof define&&define.amd?define([],function(){return c}):(c.noConflict=function(d){return function(){return a.fx=d,c.noConflict=b,c}}(a.fx),a.fx=c)}(this),function(a,b){function c(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function d(a){return l?l(a):"[object Array]"===m.call(a)}function e(a){return"[object Object]"===m.call(a)}function f(a,b){var c,a=a||{},b=b||{};for(c in b)b.hasOwnProperty(c)&&null==a[c]&&(a[c]=b[c]);return a}function g(a,b,c){var e,f,d=[];if(!a)return d;if(k&&a.map===k)return a.map(b,c);for(e=0,f=a.length;e<f;e++)d[e]=b.call(c,a[e],e,a);return d}function h(a,b){return a=Math.round(Math.abs(a)),isNaN(a)?b:a}function i(a){var b=j.settings.currency.format;return"function"==typeof a&&(a=a()),c(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:a&&a.pos&&a.pos.match("%v")?a:c(b)?j.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:b}var j={version:"0.3.2",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},k=Array.prototype.map,l=Array.isArray,m=Object.prototype.toString,n=j.unformat=j.parse=function(a,b){if(d(a))return g(a,function(a){return n(a,b)});if(a=a||0,"number"==typeof a)return a;var b=b||".",c=RegExp("[^0-9-"+b+"]",["g"]),c=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(c,"").replace(b,"."));return isNaN(c)?0:c},o=j.toFixed=function(a,b){var b=h(b,j.settings.number.precision),c=Math.pow(10,b);return(Math.round(j.unformat(a)*c)/c).toFixed(b)},p=j.formatNumber=function(a,b,c,i){if(d(a))return g(a,function(a){return p(a,b,c,i)});var a=n(a),k=f(e(b)?b:{precision:b,thousand:c,decimal:i},j.settings.number),l=h(k.precision),m=0>a?"-":"",q=parseInt(o(Math.abs(a||0),l),10)+"",r=3<q.length?q.length%3:0;return m+(r?q.substr(0,r)+k.thousand:"")+q.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+k.thousand)+(l?k.decimal+o(Math.abs(a),l).split(".")[1]:"")},q=j.formatMoney=function(a,b,c,k,l,m){if(d(a))return g(a,function(a){return q(a,b,c,k,l,m)});var a=n(a),o=f(e(b)?b:{symbol:b,precision:c,thousand:k,decimal:l,format:m},j.settings.currency),r=i(o.format);return(0<a?r.pos:0>a?r.neg:r.zero).replace("%s",o.symbol).replace("%v",p(Math.abs(a),h(o.precision),o.thousand,o.decimal))};j.formatColumn=function(a,b,k,l,m,o){if(!a)return[];var q=f(e(b)?b:{symbol:b,precision:k,thousand:l,decimal:m,format:o},j.settings.currency),r=i(q.format),s=r.pos.indexOf("%s")<r.pos.indexOf("%v"),t=0,a=g(a,function(a){return d(a)?j.formatColumn(a,q):(a=n(a),a=(0<a?r.pos:0>a?r.neg:r.zero).replace("%s",q.symbol).replace("%v",p(Math.abs(a),h(q.precision),q.thousand,q.decimal)),a.length>t&&(t=a.length),a)});return g(a,function(a){return c(a)&&a.length<t?s?a.replace(q.symbol,q.symbol+Array(t-a.length+1).join(" ")):Array(t-a.length+1).join(" ")+a:a})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports.accounting=j):"function"==typeof define&&define.amd?define([],function(){return j}):(j.noConflict=function(c){return function(){return a.accounting=c,j.noConflict=b,j}}(a.accounting),a.accounting=j)}(this),function(a){a.gatsby_woocommerce_mod=a.gatsby_woocommerce_mod||{},a.gatsby_woocommerce_mod.currencySwitcher=function(){var b=fx.noConflict(),c=wc_currency_converter_params.current_currency,d=a.parseJSON(wc_currency_converter_params.currencies),e=wc_currency_converter_params.currency_pos,f=wc_currency_converter_params.num_decimals,g=wc_currency_converter_params.trim_zeros;b.rates=wc_currency_converter_params.rates,b.base=wc_currency_converter_params.base,b.settings.from=wc_currency_converter_params.currency,"RMB"==b.settings.from&&(b.settings.from="CNY"),{init:function(){var b=this;c?(b.currencySwitch(c),a('ul.currency-switcher li a[data-currency-code="'+c+'"]').addClass("active")):a("ul.currency-switcher li a.default").addClass("active"),b.listeners()},listeners:function(){var b=this;a("ul.currency-switcher").on("click","a",function(){var d=a(this),e=d.data("currency-code");return b.currencySwitch(e),a.cookie("woocommerce_current_currency",e,{expires:10,path:"/"}),c=e,location.reload(),!1}),b.price_filter_update(c),a("body").on("price_slider_create price_slider_slide price_slider_change",function(){b.price_filter_update(c)}).on("wc_fragments_refreshed wc_fragments_loaded show_variation updated_checkout updated_shipping_method added_to_cart cart_page_refreshed cart_widget_refreshed updated_addons",function(){c&&b.currencySwitch(c)})},currencySwitch:function(c){var h=this;a("span.amount").each(function(){var h=a(this).attr("data-original");"undefined"!=typeof h&&0!=h||a(this).attr("data-original",a(this).html());var i=a(this).attr("data-price");if("undefined"==typeof i||0==i){var i=a(this).html();a("<del></del>"+i).find("del").remove(),i=i.replace(wc_currency_converter_params.thousand_sep,""),i=i.replace(wc_currency_converter_params.decimal_sep,"."),i=i.replace(/[^0-9\.]/g,""),i=parseFloat(i),a(this).attr("data-price",i)}price=b(i).to(c),price=price.toFixed(f),price=accounting.formatNumber(price,f,wc_currency_converter_params.thousand_sep,wc_currency_converter_params.decimal_sep),g&&(price=price.replace(wc_currency_converter_params.zero_replace,"")),d[c]?"left"==e?a(this).html(d[c]+price):"right"==e?a(this).html(price+" "+d[c]):"left_space"==e?a(this).html(d[c]+" "+price):"right_space"==e&&a(this).html(price+" "+d[c]):a(this).html(price+" "+c),a(this).attr("title",wc_currency_converter_params.i18n_oprice+i)}),a("#shipping_method option").each(function(){var d=a(this).attr("data-original");"undefined"!=typeof d&&0!=d||(d=a(this).text(),a(this).attr("data-original",d));var e=d;e=e.split(":"),e[1]&&""!=e[1]&&(price=e[1],price&&(price=price.replace(wc_currency_converter_params.thousand_sep,""),price=price.replace(wc_currency_converter_params.decimal_sep,"."),price=price.replace(/[^0-9\.]/g,""),price=parseFloat(price),price=b(price).to(c),price=price.toFixed(f),price=accounting.formatNumber(price,f,wc_currency_converter_params.thousand_sep,wc_currency_converter_params.decimal_sep),g&&(price=price.replace(wc_currency_converter_params.zero_replace,"")),a(this).html(e[0]+": "+price+" "+c)))}),h.price_filter_update(c),a("body").trigger("currency_converter_switch",[c])},price_filter_update:function(c){c&&a(".ui-slider").each(function(){theslider=a(this),values=theslider.slider("values"),original_price=""+values[1],original_price=original_price.replace(wc_currency_converter_params.thousand_sep,""),original_price=original_price.replace(wc_currency_converter_params.decimal_sep,"."),original_price=original_price.replace(/[^0-9\.]/g,""),original_price=parseFloat(original_price),price_max=b(original_price).to(c),original_price=""+values[0],original_price=original_price.replace(wc_currency_converter_params.thousand_sep,""),original_price=original_price.replace(wc_currency_converter_params.decimal_sep,"."),original_price=original_price.replace(/[^0-9\.]/g,""),original_price=parseFloat(original_price),price_min=b(original_price).to(c),a(".price_slider_amount").find("span.from").html(price_min.toFixed(2)+" "+c),a(".price_slider_amount").find("span.to").html(price_max.toFixed(2)+" "+c)})}}.init()},a(function(){a.gatsby_woocommerce_mod.currencySwitcher()})}(jQuery);